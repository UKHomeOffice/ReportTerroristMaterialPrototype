<link href="/public/stylesheets/application.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/public/stylesheets/elements.css" media="screen" rel="stylesheet" type="text/css" />
<script src="/public/javascripts/jquery.min.js"></script>
<script src="/public/javascripts/form.storage.js"></script>
<script>
$(document).ready(function(){
  $(".hide-by-default").hide();
  //write to local storage
  $('form').storeForm();
  //play back from local storage
  $('.playback-container').getForm();
  $('body').on('change', 'input', function(){

    var $this = $(this);

    // toggle optional sections

    if ($this.is(':checkbox')){

      var $toggleTarget = $('.optional-section-'+$this.attr('name') + '[data-toggle-value="'+$this.val() + '"]');

      console.log('.optional-section-'+$this.attr('name') + '[data-toggle-value="'+$this.val() + '"]');

      if ($toggleTarget.length){

        $toggleTarget.toggle($this.is(':checked') && $this.val() == $toggleTarget.attr('data-toggle-value'));

      }

    } else if ($this.is(':radio')){

      var $toggleTarget = $('.optional-section-'+$this.attr('name'));

      console.log('.optional-section-'+$this.attr('name') + '[data-toggle-value="'+$this.val() + '"]');

      $toggleTarget.each(function(){

        $(this).toggle($this.val() == $(this).attr('data-toggle-value'));

      });
    }

  });
});
</script>
